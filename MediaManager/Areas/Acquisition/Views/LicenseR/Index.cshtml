@{
    ViewBag.Title = "License Review";
    Layout = MediaManager.Infrastructure.Helpers.SharedPages.LayoutPage;

}
@*<h2>License Review</h2>*@
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css"
    type="text/css" />
<script src="http://code.jquery.com/jquery-1.8.3.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js" type="text/javascript"></script>
<script src="~/Content/Scripts/Jquery_AutoComplete.js" type="text/javascript"></script>
<link href="../../../../Content/Project.css" rel="stylesheet" />
<script src="../../../../Content/Scripts/jquery-latest.min.js" type="text/javascript"></script>
<script src="../../../../Content/Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>
<script src="../../../../Content/Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
<script src="../../../../Content/Scripts/slick.grid.js" type="text/javascript"></script>
<script src="../../../../Content/Scripts/slick.core.js" type="text/javascript"></script>
<script src="../../../../Content/Scripts/jquery.event.drag-2.0.min.js" type="text/javascript"></script>
<link href="../../../../Content/slick.grid.css" rel="stylesheet" type="text/css" />
<script src="../../../../Content/Scripts/firebugx.js" type="text/javascript"></script>
<script src="../../../../Content/Scripts/jquery-1.7.min.js" type="text/javascript"></script>
<script src="../../../../Content/Scripts/jquery-ui-1.8.16.custom.min.js" type="text/javascript"></script>
<script src="../../../../Content/Scripts/jquery.event.drag-2.0.min.js" type="text/javascript"></script>
<script src="../../../../Content/Scripts/slick.core.js" type="text/javascript"></script>
<script src="../../../../Content/Scripts/slick.cellrangedecorator.js" type="text/javascript"></script>
<script src="../../../../Content/Scripts/slick.cellrangeselector.js" type="text/javascript"></script>
<script src="../../../../Content/Scripts/slick.cellselectionmodel.js" type="text/javascript"></script>
<script src="../../../../Content/Scripts/slick.formatters.js" type="text/javascript"></script>
<script src="../../../../Content/Scripts/slick.editors.js" type="text/javascript"></script>
<script src="../../../../Content/Scripts/slick.grid.js" type="text/javascript"></script>
<script src="../../../../Content/Scripts/slick.rowmovemanager.js" type="text/javascript"></script>
<link rel="stylesheet" href="../../../../Content/slick.grid.css" type="text/css" />
<link rel="stylesheet" href="../../../../Content/jquery-ui-1.8.16.custom.css" type="text/css" />
<link rel="stylesheet" href="../../../../Content/examples.css" type="text/css" />
<link href="../../../../Content/slick.pager.css" rel="stylesheet" type="text/css" />
<link href="../../../../Content/slick-default-theme.css" rel="stylesheet" type="text/css" />
<link href="../../../../Content/slick.grid.css" rel="stylesheet" type="text/css" />
<script src="../../../../Content/Scripts/jquery-1.8.3.js" type="text/javascript"></script>

<script type="text/javascript">

    var grid;
    var gridSecond;
    var gridThree;
    var gridFour;
    var gridFive;


    var columns = [

                        { id: "ProgramTitle", name: "ProgramTitle", field: "ProgramTitle" },
                        { id: "Producer", name: "Producer", field: "Producer" },
                        { id: "YearValue", name: "YearValue", field: "YearValue" },
                        { id: "Type", name: "Type", field: "Type" },
                        { id: "Category", name: "Category", field: "Category" },
                        { id: "Series", name: "Series", field: "Series" },
                        { id: "Code", name: "Code", field: "Code" },
                        { id: "GenRefNo", name: "GenRefNo", field: "GenRefNo" },

                         ];




    var columngridLicensee = [
                        { id: "LicenseeNumber", name: "Number", field: "LicenseeNumber" },
                        { id: "Licesee", name: "Licensee", field: "Licesee" },
                        { id: "ChannelService", name: "Channel", field: "ChannelService" },
                        { id: "Contract", name: "Contract", field: "Contract" },
                        { id: "StartDate", name: "Start", field: "StartDate" },
                        { id: "EndDate", name: "End", field: "EndDate" },
                        { id: "LicenseeRuns", name: "Lic", field: "LicenseeRuns" },
                        { id: "NumberOfRuns", name: "Int", field: "NumberOfRuns" },
                        { id: "PaidRuns", name: "Paid", field: "PaidRuns" },
                        { id: "LastScheduleDate", name: "Last", field: "LastScheduleDate" },
                        { id: "LicenseStatus", name: "Status", field: "LicenseStatus" },
                        { id: "LicenseType", name: "Type", field: "LicenseType" },
                        { id: "Ex", name: "Ex", field: "Ex" },

                             ];



    var columngridChannelSummary = [

                        { id: "Channel", name: "Channel", field: "Channel" },
                        { id: "PaidRuns", name: "PaidRuns", field: "PaidRuns" },
                        { id: "FreeRuns", name: "FreeRuns", field: "FreeRuns" },
                        { id: "SchStartDate", name: "Sch Start Date", field: "SchStartDate" },
                        { id: "SchEndDate", name: "Sch End Date", field: "SchEndDate" },

                        ];



    var columngridLineupSummary = [

                        { id: "LineUpMonth", name: "Month", field: "LineUpMonth" },
                        { id: "LineUpYear", name: "Year", field: "LineUpYear" },
                        { id: "PlayStatus", name: "PlayStatus", field: "PlayStatus" },
                        { id: "Channel", name: "Channel", field: "Channel" },
                        { id: "SchStartDate", name: "Sch Start Date", field: "SchStartDate" },
                        { id: "SchEndDate", name: "Sch End Date", field: "SchEndDate" },

                        ];

    var columngridScheduleSummary = [

                        { id: "ScheduleDate", name: "Date", field: "ScheduleDate" },
                        { id: "ScheduleTime", name: "Time", field: "ScheduleTime" },
                        { id: "PaidOrFreeRuns", name: "Paid/Free", field: "PaidOrFreeRuns" },
                        { id: "ActualChannel", name: "Channel", field: "ActualChannel" },
                        { id: "SchStartDate", name: "Sch Start Date", field: "SchStartDate" },
                        { id: "SchEndDate", name: "Sch End Date", field: "SchEndDate" },

                        ];







    var options = {
        enableCellNavigation: true,
        enableColumnReorder: false,
        forceFitColumns: true

    };



        function Search() {



          var myDataFirst = [];
            var myDataSecond = [];
            var myDataThree = [];
            var myDataFour = [];
            var myDataFive = [];


            $.ajax({
                url: '@Url.Action("GetLicenseReviewData", "LicenseR", new { area = "Acquisition" })',
                type: "POST",
                dataType: 'Json',
                data: "title=" + $("#txtProgramTitle").val() + "&producer=" + $("#txtProducer").val() + "&yearvalue=" + $("#txtYear").val() + "&type=" + $("#txtProgramType").val() + "&category=" + $("#txtCategory").val() + "&code=" + $("#txtCode").val() + "&refno=" + $("#txtRefno").val() + "&series=" + $("#txtSeries").val() + "&premierflag=" + $('input:checkbox[name=chkPremium]').is(':checked'),



                success: function (data) {


                    myDataFirst = data.First;
                    myDataSecond = data.Second;
                    myDataThree = data.Three;
                    myDataFour = data.Four;
                    myDataFive = data.Five;

                    alert("data populated");


                    grid = new Slick.Grid("#gridGeneral", myDataFirst, columns, options);

                    secondgrid(myDataSecond);
                    thridgrid(myDataThree);
                    fourthgrid(myDataFour);
                    fifthgrid(myDataFive);

                    alert("grids binded");

                    grid.onClick.subscribe(function (e, args) {

                        var cell = grid.getCellFromEvent(e);
                        var row = cell.row;
                        selectedvalue = myDataFirst[cell.row].GenRefNo;
                        alert(selectedvalue);
                        ShowlicenseDetails(selectedvalue);
                    });




                },
                error: function () {
                    alert("error");
                }
            });                                //end of jax call

         

        };


        
    function ShowlicenseDetails(GenRefNo) {
        alert('test1');
        $.post('@Url.Action("DisplayLicenseDetails", "LicenseR", new { area = "Acquisition" })', { "GenRefNo": GenRefNo },
         function (data) {


             var myDataLicensee = [];
             var myDataChannelSummary = [];
             var myDataLineUpSummary = [];
             var myDataScheduleSummary = [];

             myDataLicensee = data.dtlsgridLicensees;
             myDataChannelSummary = data.dtlsgridChannelSummary;
             myDataLineUpSummary = data.dltsLineUpSummary;
             myDataScheduleSummary = data.dtlsScheduleSummary;


             secondgrid(myDataLicensee);
             thridgrid(myDataChannelSummary);
             fourthgrid(myDataLineUpSummary);
             fifthgrid(myDataScheduleSummary);
             // gridSecond = null;
             //gridSecond = new Slick.Grid("#gridLicensees", myDataLicensee, columngridLicensee, options);
             //gridThree = new Slick.Grid("#gridChannelSummary", myDataChannelSummary, columngridChannelSummary, options);
             //gridFour = new Slick.Grid("#gridLineupSummary", myDataLineUpSummary, columngridLineupSummary, options);
             //gridFive = new Slick.Grid("#gridScheduleSummary", myDataScheduleSummary, columngridScheduleSummary, options);

         }, "json");

    };

    function ShowSummaryDetails(LicNumber) {

        $.post('@Url.Action("DisplayLicSummaryDetails", "LicenseR", new { area = "Acquisition" })', { "LicNumber": LicNumber },
         function (data) {

             var myDataSummaryChannel = [];
             var myDataSummaryLineUP = [];
             var myDataSummarySchedule = [];


             myDataSummaryChannel = data.dtlsgridChannelSummary;
             myDataSummaryLineUP = data.dltsLineUpSummary;
             myDataSummarySchedule = data.dtlsScheduleSummary;


             thridgrid(myDataSummaryChannel);
             fourthgrid(myDataSummaryLineUP);
             fifthgrid(myDataSummarySchedule);

          

         }, "json");

     };

     function secondgrid(myDataSecond) {
       
         gridSecond = new Slick.Grid("#gridLicensees", myDataSecond, columngridLicensee, options);
         gridSecond.onClick.subscribe(function (e, args) {

                    var cell = gridSecond.getCellFromEvent(e);
                    var row = cell.row;
                    //alert(row);

                    var getVal = myDataSecond[cell.row].LicenseeNumber;
                    alert(getVal);
                    alert("Second Grid");
                    ShowSummaryDetails(getVal);

                });
     };


     function thridgrid(myDataThree) {
      
         gridThree = new Slick.Grid("#gridChannelSummary", myDataThree, columngridChannelSummary, options);
        
     };

    

     function fourthgrid(myDataFour) {
     
          gridFour = new Slick.Grid("#gridLineupSummary", myDataFour, columngridLineupSummary, options);
         
     };

      function fifthgrid(myDataFive) {
        
         gridFive = new Slick.Grid("#gridScheduleSummary", myDataFive, columngridScheduleSummary, options);
        
     };



</script>
<table class="Layout">
    <tr>
        <td class="pagecontent">
            <div class="mainHeading">
                <b>License Review</b>
            </div>
            <form action="#" method="post">
            <div class="PlaceHolder">
            
                <table id="tblLicense" align="center" cellpadding="0" cellspacing="4" >
              <tr>
                <td colspan="4" align="left">
                 <b>
                 Search Criteria 
                 </b>
                </td>
                
                
                </tr>
                    <tr>
                        <td>
                            Program Title
                        </td>
                        <td >
                            <input name="txtProgramTitle" type="text" id="txtProgramTitle" class="inputTextSamll" />
                        </td>
                        <td >
                            Producer
                        </td>
                        <td >
                            <input name="txtProducer" type="text" id="txtProducer" class="inputTextSamll" />
                        </td>
                         <td>
                            &nbsp;
                        </td>
                        <td>
                            
                        </td>
                        <td >
                            Year
                        </td>
                        <td >
                            <input name="txtYear" type="text" id="txtYear" class="inputTextSamll" />
                        </td>
                    </tr>
               <tr>
                        <td>
                            Program Type
                        </td>
                        <td>
                            <input name="txtProgramType" type="text" id="txtProgramType" class="inputTextSamll" />
                        </td>
                        <td>
                            Category
                        </td>
                        <td width="146">
                            <input name="txtCategory" type="text" id="txtCategory" class="inputTextSamll" /> <div style="width:12px; height:15px; text-align:right; float:right; padding-top:7px;"><img id="imgMethodId" src="~/Content/images/lov_down_arrow.png" /></div>
                        </td>
                         <td>
                            &nbsp;
                        </td>
                        <td>
                            
                        </td>

                        <td>
                            Code
                        </td>
                        <td>
                            <input name="txtCode" type="text" id="txtCode" class="inputTextSamll" />
                        </td>
                    </tr>
                   <tr>
                        <td>
                            Ref. No
                        </td>
                        <td>
                            <input name="txtRefno" type="text" id="txtRefno" class="inputTextSamll" />
                        </td>
                        <td>
                            Series
                        </td>
                        <td>
                            <input name="txtSeries" type="text" id="txtSeries" class="inputTextSamll" />
                        </td>
                        <td>
                            &nbsp;
                        </td>
                       <td>
                            &nbsp;
                        </td>
                        
                        <td >
                        </td>
                        <td >
                        </td>

                    </tr>
               <tr>
                        <td>
                            
                                
                                
                        </td>
                       
                        <td align="left">
                       <label>  <input type="checkbox" name="chkPremium"/>&nbsp;&nbsp;Premium</label>
                        </td>
                        <td >
                        </td>
                       
                        <td align="right" style="margin-left: 35%" colspan="6">
                            <input id="btnSearch" type="button" class="inputButton" value="Search" onclick="Search();" />
                            &nbsp;
                            <input id="btnReset" type="button" class="inputButton" value="Reset" />
                        </td>
                    </tr>
                </table>
            </div>
            </form>
        </td>
    </tr>


    <tr>
    <td>
    <div class="subHeading"> General </div>
    </td>
    
    </tr>
    <tr>
        <td>
            <div class="PlaceHolder">
                <table align="center" width="100%" cellpadding="0" cellspacing="0" class="tableLayout">
                    <tr>
                        <td width="100%">
                            <table class="tableLayout">
                                <tr>
                                    <td>
                                        <div id="gridGeneral" style="width: 1300px; height: 200px;">
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        @* <div id="divGeneral" data-search-url='@Url.Action("GetLicenseReviewData", "License", new { area = "Acquisition" })' " >
                               ...</div>*@
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </div>
        </td>
    </tr>

    <tr>
    <td>
    <div class="subHeading"> Licensees </div>
    </td>
    
    </tr>
    <tr>
        <td>
            <div class="PlaceHolder">
                <table align="center" width="100%" cellpadding="0" cellspacing="0">
                    <tr>
                        <td width="100%">
                            <table class="tableLayout">
                                <tr>
                                    <td>
                                        <div id="gridLicensees" style="width: 1300px; height: 100px;">
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </div>
        </td>
    </tr>
    <tr>
        <td>
            <div class="PlaceHolder">
                <table>
                    <tr>
                        <td width="100%">
                            <table class="tableLayout">
                                <tr>
                                    <td>
                                    <div class="subHeading"> Channel Summary </div>
                                        <div id="gridChannelSummary" style="width: 430px; height: 250px;">
                                        </div>
                                    </td>
                                    <td>
                                        &nbsp; &nbsp;&nbsp;
                                    </td>
                                    <td><div class="subHeading"> Line Up Summary </div>
                                        <div id="gridLineupSummary" style="width: 430px; height: 250px;">
                                        </div>
                                    </td>
                                    <td>
                                        &nbsp;&nbsp;&nbsp;
                                    </td>
                                    <td>
                                    <div class="subHeading"> Schedule Summary </div>
                                        <div id="gridScheduleSummary" style="width: 430px; height: 250px;">
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </td>
                        <td>
                        </td>
                    </tr>
                </table>
            </div>
        </td>
    </tr>
</table>
